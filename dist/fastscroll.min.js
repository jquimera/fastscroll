!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.FastScroll=f()}}(function(){var define;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){!function(exports){"use strict";var delegate=function(target,handler){var args=[].slice.call(arguments,2),fn=function(){return handler.apply(target,args)};return fn};"undefined"!=typeof module&&module.exports?module.exports=delegate:"undefined"!=typeof define?define(function(){return delegate}):exports.delegate=delegate}(this)},{}],2:[function(require,module,exports){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(obj,start){for(var i=start||0,j=this.length;j>i;i++)if(this[i]===obj)return i;return-1});var EventDispatcher=function(){this._eventMap={},this._destroyed=!1};EventDispatcher.prototype={addListener:function(event,listener){return this.getListener(event)||(this._eventMap[event]=[]),-1==this.getListener(event).indexOf(listener)&&this._eventMap[event].push(listener),this},addListenerOnce:function(event,listener){var s=this,f2=function(){return s.removeListener(event,f2),listener.apply(this,arguments)};return this.addListener(event,f2)},removeListener:function(event,listener){var listeners=this.getListener(event);if(listeners){var i=listeners.indexOf(listener);i>-1&&(this._eventMap[event]=listeners.splice(i,1),0===listeners.length&&delete this._eventMap[event])}return this},removeAllListener:function(event){var listeners=this.getListener(event);return listeners&&(this._eventMap[event].length=0,delete this._eventMap[event]),this},dispatch:function(eventType,eventObject){var listeners=this.getListener(eventType);if(listeners){eventObject=eventObject?eventObject:{},eventObject.type=eventType,eventObject.target=eventObject.target||this;for(var i=-1;++i<listeners.length;)listeners[i].call(null,eventObject)}return this},getListener:function(event){if(this._destroyed)throw new Error("I am destroyed");return this._eventMap[event]},destroy:function(){if(this._eventMap){for(var i in this._eventMap)this.removeAllListener(i);this._eventMap=null}this._destroyed=!0}},EventDispatcher.prototype.on=EventDispatcher.prototype.bind=EventDispatcher.prototype.addEventListener=EventDispatcher.prototype.addListener,EventDispatcher.prototype.off=EventDispatcher.prototype.unbind=EventDispatcher.prototype.removeEventListener=EventDispatcher.prototype.removeListener,EventDispatcher.prototype.once=EventDispatcher.prototype.one=EventDispatcher.prototype.addListenerOnce,EventDispatcher.prototype.trigger=EventDispatcher.prototype.dispatchEvent=EventDispatcher.prototype.dispatch,module.exports=EventDispatcher},{}],3:[function(require,module,exports){"use strict";var delegate=require("delegatejs"),EventDispatcher=require("./eventdispatcher"),FastScroll=function(scrollTarget){this.element=scrollTarget||window,this.element&&this.init()};FastScroll.UP="up",FastScroll.DOWN="down",FastScroll.NONE="none",FastScroll.LEFT="left",FastScroll.RIGHT="right",FastScroll.prototype={destroyed:!1,scrolling:!1,scrollY:0,scrollX:0,lastScrollY:0,lastScrollX:0,speedY:0,speedX:0,stopFrames:5,currentStopFrames:0,firstRender:!0,_hasRequestedAnimationFrame:!1,init:function(){this.dispatcher=new EventDispatcher,this.updateScrollPosition=this.element===window?delegate(this,this.updateWindowScrollPosition):delegate(this,this.updateElementScrollPosition),this.onScrollDelegate=delegate(this,this.onScroll),this.onAnimationFrameDelegate=delegate(this,this.onAnimationFrame),this.element.addEventListener("scroll",this.onScrollDelegate,!1)},destroy:function(){this.element.removeEventListener("scroll",this.onScrollDelegate),this.onScrollDelegate=null,this.element=null,this.destroyed=!0},getAttributes:function(){return{scrollX:this.scrollX,scrollY:this.scrollY,speedY:this.speedY,speedX:this.speedX,angle:0,speedY:0===this.speedY?FastScroll.NONE:this.speedY>0?FastScroll.UP:FastScroll.DOWN,speedX:0===this.speedX?FastScroll.NONE:this.speedX>0?FastScroll.RIGHT:FastScroll.LEFT}},updateWindowScrollPosition:function(){this.scrollY=this.element.scrollY||this.element.pageYOffset||0,this.scrollX=this.element.scrollX||this.element.pageXOffset||0},updateElementScrollPosition:function(){this.scrollY=this.element.scrollTop,this.scrollX=this.element.scrollLeft},onScroll:function(){this.updateScrollPosition(),this.currentStopFrames=0,this.scrolling=!0,this.firstRender&&(this.scrollY>1&&(this.currentStopFrames=this.stopFrames-1),this.firstRender=!1),this._hasRequestedAnimationFrame||(this._hasRequestedAnimationFrame=!0,this.dispatchEvent("scroll:start"),requestAnimationFrame(this.onAnimationFrameDelegate))},onAnimationFrame:function(){if(!this.destroyed){if(this.updateScrollPosition(),this.speedY=this.lastScrollY-this.scrollY,this.speedX=this.lastScrollX-this.scrollX,this.lastScrollY=this.scrollY,this.lastScrollX=this.scrollX,0===this.speedY&&this.scrolling&&this.currentStopFrames++>this.stopFrames)return void this.onScrollStop();this.dispatchEvent("scroll:progress"),requestAnimationFrame(this.onAnimationFrameDelegate)}},onScrollStop:function(){this.scrolling=!1,this._hasRequestedAnimationFrame=!1,this.currentStopFrames=0,this.dispatchEvent("scroll:stop")},dispatchEvent:function(type,eventObject){eventObject=eventObject||this.getAttributes(),eventObject.fastScroll=this,eventObject.target=this.element,this.dispatcher.dispatch(type,eventObject)},on:function(event,listener){return this.dispatcher.on(event,listener)},off:function(event,listener){return this.dispatcher.off(event,listener)}},module.exports=FastScroll},{"./eventdispatcher":2,delegatejs:1}]},{},[3])(3)});
