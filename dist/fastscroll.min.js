!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.FastScroll=f()}}(function(){var define;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){!function(exports){"use strict";var delegate=function(target,handler){var args=[].slice.call(arguments,2),fn=function(){return handler.apply(target,args)};return fn};"undefined"!=typeof module&&module.exports?module.exports=delegate:"undefined"!=typeof define?define(function(){return delegate}):exports.delegate=delegate}(this)},{}],2:[function(require,module,exports){"use strict";function isEmpty(obj){for(var prop in obj)if(obj.hasOwnProperty(prop))return!1;return!0}var _instanceMap={},EventDispatcher=function(){this._eventMap={},this._destroyed=!1};EventDispatcher.getInstance=function(key){if(!key)throw new Error("key must be");return _instanceMap[key]||(_instanceMap[key]=new EventDispatcher)},EventDispatcher.prototype.addListener=function(event,listener){var listeners=this.getListener(event);return listeners?-1===listeners.indexOf(listener)?(listeners.push(listener),!0):!1:(this._eventMap[event]=[listener],!0)},EventDispatcher.prototype.addListenerOnce=function(event,listener){var s=this,f2=function(){return s.removeListener(event,f2),listener.apply(this,arguments)};return this.addListener(event,f2)},EventDispatcher.prototype.removeListener=function(event,listener){if("undefined"==typeof listener)return this.removeAllListener(event);var listeners=this.getListener(event);if(listeners){var i=listeners.indexOf(listener);if(i>-1)return listeners=listeners.splice(i,1),listeners.length||delete this._eventMap[event],!0}return!1},EventDispatcher.prototype.removeAllListener=function(event){var listeners=this.getListener(event);return listeners?(this._eventMap[event].length=0,delete this._eventMap[event],!0):!1},EventDispatcher.prototype.hasListener=function(event){return null!==this.getListener(event)},EventDispatcher.prototype.hasListeners=function(){return null!==this._eventMap&&void 0!==this._eventMap&&!isEmpty(this._eventMap)},EventDispatcher.prototype.dispatch=function(eventType,eventObject){var listeners=this.getListener(eventType);if(listeners){eventObject=eventObject||{},eventObject.type=eventType,eventObject.target=eventObject.target||this;for(var i=-1;++i<listeners.length;)listeners[i](eventObject);return!0}return!1},EventDispatcher.prototype.getListener=function(event){var result=this._eventMap?this._eventMap[event]:null;return result||null},EventDispatcher.prototype.destroy=function(){if(this._eventMap){for(var i in this._eventMap)this.removeAllListener(i);this._eventMap=null}this._destroyed=!0},EventDispatcher.prototype.on=EventDispatcher.prototype.bind=EventDispatcher.prototype.addEventListener=EventDispatcher.prototype.addListener,EventDispatcher.prototype.off=EventDispatcher.prototype.unbind=EventDispatcher.prototype.removeEventListener=EventDispatcher.prototype.removeListener,EventDispatcher.prototype.once=EventDispatcher.prototype.one=EventDispatcher.prototype.addListenerOnce,EventDispatcher.prototype.trigger=EventDispatcher.prototype.dispatchEvent=EventDispatcher.prototype.dispatch,module.exports=EventDispatcher},{}],3:[function(require,module,exports){"use strict";var delegate=require("delegatejs"),EventDispatcher=require("eventdispatcher"),_instanceMap={},FastScroll=function(scrollTarget,options){scrollTarget=scrollTarget||window,this.options=options||{},this.options.hasOwnProperty("animationFrame")||(this.options.animationFrame=!0),this.scrollTarget=scrollTarget,this.init()};FastScroll.___instanceMap=_instanceMap,FastScroll.getInstance=function(scrollTarget,options){return scrollTarget=scrollTarget||window,_instanceMap[scrollTarget]||(_instanceMap[scrollTarget]=new FastScroll(scrollTarget,options))},FastScroll.hasInstance=function(scrollTarget){return void 0!==_instanceMap[scrollTarget]},FastScroll.hasScrollTarget=FastScroll.hasInstance,FastScroll.clearInstance=function(scrollTarget){scrollTarget=scrollTarget||window,FastScroll.hasInstance(scrollTarget)&&(FastScroll.getInstance(scrollTarget).destroy(),delete _instanceMap[scrollTarget])},FastScroll.UP="up",FastScroll.DOWN="down",FastScroll.NONE="none",FastScroll.LEFT="left",FastScroll.RIGHT="right",FastScroll.prototype={destroyed:!1,scrollY:0,scrollX:0,lastScrollY:0,lastScrollX:0,timeout:0,speedY:0,speedX:0,stopFrames:5,currentStopFrames:0,firstRender:!0,animationFrame:!0,lastEvent:{type:null,scrollY:0,scrollX:0},scrolling:!1,init:function(){this.dispatcher=new EventDispatcher,this.updateScrollPosition=this.scrollTarget===window?delegate(this,this.updateWindowScrollPosition):delegate(this,this.updateElementScrollPosition),this.updateScrollPosition(),this.trigger=this.dispatchEvent,this.lastEvent.scrollY=this.scrollY,this.lastEvent.scrollX=this.scrollX,this.onScroll=delegate(this,this.onScroll),this.onNextFrame=delegate(this,this.onNextFrame),this.scrollTarget.addEventListener?(this.scrollTarget.addEventListener("mousewheel",this.onScroll,!1),this.scrollTarget.addEventListener("scroll",this.onScroll,!1)):this.scrollTarget.attachEvent&&(this.scrollTarget.attachEvent("onmousewheel",this.onScroll),this.scrollTarget.attachEvent("scroll",this.onScroll))},destroy:function(){this.destroyed||(this.cancelNextFrame(),this.scrollTarget.addEventListener?(this.scrollTarget.removeEventListener("mousewheel",this.onScroll),this.scrollTarget.removeEventListener("scroll",this.onScroll)):this.scrollTarget.attachEvent&&(this.scrollTarget.detachEvent("onmousewheel",this.onScroll),this.scrollTarget.detachEvent("scroll",this.onScroll)),this.dispatcher.off(),this.dispatcher=null,this.onScroll=null,this.updateScrollPosition=null,this.onNextFrame=null,this.scrollTarget=null,this.destroyed=!0)},getAttributes:function(){return{scrollY:this.scrollY,scrollX:this.scrollX,speedY:this.speedY,speedX:this.speedX,angle:0,directionY:0===this.speedY?FastScroll.NONE:this.speedY>0?FastScroll.UP:FastScroll.DOWN,directionX:0===this.speedX?FastScroll.NONE:this.speedX>0?FastScroll.RIGHT:FastScroll.LEFT}},updateWindowScrollPosition:function(){this.scrollY=window.scrollY||window.pageYOffset||0,this.scrollX=window.scrollX||window.pageXOffset||0},updateElementScrollPosition:function(){this.scrollY=this.scrollTarget.scrollTop,this.scrollX=this.scrollTarget.scrollLeft},onScroll:function(){if(this.currentStopFrames=0,this.firstRender&&(this.firstRender=!1,this.scrollY>1))return this.updateScrollPosition(),void this.dispatchEvent("scroll:progress");if(this.scrolling||(this.scrolling=!0,this.dispatchEvent("scroll:start"),this.options.animationFrame&&(this.nextFrameID=requestAnimationFrame(this.onNextFrame))),!this.options.animationFrame){clearTimeout(this.timeout),this.onNextFrame();var self=this;this.timeout=setTimeout(function(){self.onScrollStop()},100)}},onNextFrame:function(){return this.updateScrollPosition(),this.speedY=this.lastScrollY-this.scrollY,this.speedX=this.lastScrollX-this.scrollX,this.lastScrollY=this.scrollY,this.lastScrollX=this.scrollX,this.options.animationFrame&&this.scrolling&&0===this.speedY&&this.currentStopFrames++>this.stopFrames?void this.onScrollStop():(this.dispatchEvent("scroll:progress"),void(this.options.animationFrame&&(this.nextFrameID=requestAnimationFrame(this.onNextFrame))))},onScrollStop:function(){this.scrolling=!1,this.options.animationFrame&&(this.cancelNextFrame(),this.currentStopFrames=0),this.dispatchEvent("scroll:stop")},cancelNextFrame:function(){cancelAnimationFrame(this.nextFrameID)},dispatchEvent:function(type,eventObject){eventObject=eventObject||this.getAttributes(),this.lastEvent.type===type&&this.lastEvent.scrollY===eventObject.scrollY&&this.lastEvent.scrollX===eventObject.scrollX||(this.lastEvent={type:type,scrollY:eventObject.scrollY,scrollX:eventObject.scrollX},eventObject.target=this.scrollTarget,this.dispatcher.dispatch(type,eventObject))},on:function(event,listener){return this.dispatcher.addListener(event,listener)},off:function(event,listener){return this.dispatcher.removeListener(event,listener)}},module.exports=FastScroll},{delegatejs:1,eventdispatcher:2}]},{},[3])(3)});
